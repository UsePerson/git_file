<!Doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>這是測試的</title>
        
    </head>

    <body>

        <input type="text" id="input" name="" value="">
        <button type="button" id="btn1">你好</button>
        <!-- let input display here-->
        
        <ul id="ul"></ul>


        <!--register test -->
		<label>帳號: &nbsp;</label>
		<input type="text" name="username" placeholder="Username" style="font-size: 18px;" required><br>

		<label>密碼: &nbsp;</label>
		<input type="Password" name="password" placeholder="Password" style="font-size: 18px;" required><br>
        <button type="submit" >登入</button>

        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.5.6/firebase.js"></script>
        <script>
 
            var config = {
            apiKey: "AIzaSyCZdATwQbOLSyphRRzzwbg9QF5_8I4tvWI",
            authDomain: "test-d3318.firebaseapp.com",
            databaseURL: "https://test-d3318.firebaseio.com",
            storageBucket: "test-d3318.appspot.com",
            //messagingSenderId: "<SENDER_ID>",
            };
            firebase.initializeApp(config);
        
            $(document).ready(function(){
                // link database 
                var msgRef = firebase.database().ref('/messages/');
                 $('#btn1').on('click',function(){

                    var msg = $('#input').val();
                    console.log(msg)
                    msgRef.push({
                        message: msg
                    })
                });

                // firebase return val to web ,not array only object 
                // once can't renew, only once 
                /* 
                    msgRef.once('value').then(function(snapshot) {
                    var val = snapshot.val();

                    let list = '';
                    $.each(val, function(i,item){
                        console.log('應該有東西啦', i , item);
                        list = `${list}<p>${item.message}</p>`
                    })  
                    $('#ul').html(list)  
                });  
                                                                    */

                // can remove some event
                /*
                    ref.child(key).remove()
                                            */

                // immediate renew data
                msgRef.on('value', function(snapshot) {
                    var val = snapshot.val();

                    let list = '';
                    $.each(val, function(i,item){
                        //can check console , you will know who're i and item  
                        console.log('應該有東西啦', i , item);
                        list = `${list}<p>${item.message}</p>`
                    })  
                    // show list.message to #ul
                    $('#ul').html(list)  
                
                });

            });
        </script>
    </body>
</html>